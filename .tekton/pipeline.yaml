apiVersion: tekton.dev/v1
kind: Pipeline
metadata:
  creationTimestamp: "2025-08-04T19:14:37Z"
  generation: 1
  name: cd-pipeline
  namespace: aa1020-dev
  resourceVersion: "2226849199"
  uid: da94b91e-abb8-4cba-a5cf-1749ebf691eb
spec:
  params:
  - description: URL to git repo
    name: GIT_REPO
    type: string
  - default: master
    description: branch
    name: GIT_REF
    type: string
  tasks:
  - name: git-clone-1-19-0
    params:
    - name: CRT_FILENAME
      value: ca-bundle.crt
    - name: HTTP_PROXY
      value: ""
    - name: HTTPS_PROXY
      value: ""
    - name: NO_PROXY
      value: ""
    - name: SUBDIRECTORY
      value: ""
    - name: USER_HOME
      value: /home/git
    - name: DELETE_EXISTING
      value: "true"
    - name: VERBOSE
      value: "false"
    - name: SSL_VERIFY
      value: "true"
    - name: URL
      value: $(params.GIT_REPO)
    - name: REVISION
      value: $(params.GIT_REF)
    - name: REFSPEC
      value: ""
    - name: SUBMODULES
      value: "true"
    - name: DEPTH
      value: "1"
    - name: SPARSE_CHECKOUT_DIRECTORIES
      value: ""
    taskRef:
      params:
      - name: kind
        value: task
      - name: name
        value: git-clone-1-19-0
      - name: namespace
        value: openshift-pipelines
      resolver: cluster
    workspaces:
    - name: output
      workspace: pipeline-workspace
  - name: pytest-env
    params:
    - name: pytest-args
      value: []
    - name: secret-name
      value: postgres-creds
    - name: secret-key
      value: database_uri
    runAfter:
    - git-clone-1-19-0
    taskRef:
      kind: Task
      name: pytest-env
    workspaces:
    - name: source
      workspace: pipeline-workspace
  workspaces:
  - name: pipeline-workspace
